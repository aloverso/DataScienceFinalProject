<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <title>Congress</title>
        <script src="https://d3js.org/d3.v3.min.js" charset="utf-8"></script>
        <link href="d3/nv.d3.css" rel="stylesheet">
        <script src="d3/nv.d3.js"></script>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.0/jquery.min.js"></script>

        <style>
            body {
                margin: 25px;
                font-family: Arial;
            }


            p {
                
                letter-spacing: .25px;
                line-height: 1.5;
            }

        </style>
    </head>
    <body>

        <div id="main"></div>
        
        <script type="text/javascript">

            var sessionyears = {'24': 1835, '25': 1837, '26': 1839, '27': 1841, '20': 1827, '21': 1829, '22': 1831, '23': 1833, '28': 1843, '29': 1845, '4': 1795, '8': 1803, '59': 1905, '58': 1903, '55': 1897, '54': 1895, '57': 1901, '56': 1899, '51': 1889, '50': 1887, '53': 1893, '52': 1891, '88': 1963, '89': 1965, '111': 2009, '110': 2007, '113': 2013, '112': 2011, '82': 1951, '83': 1953, '80': 1947, '81': 1949, '86': 1959, '87': 1961, '84': 1955, '85': 1957, '3': 1793, '7': 1801, '108': 2003, '109': 2005, '102': 1991, '103': 1993, '100': 1987, '101': 1989, '106': 1999, '107': 2001, '104': 1995, '105': 1997, '39': 1865, '38': 1863, '33': 1853, '32': 1851, '31': 1849, '30': 1847, '37': 1861, '36': 1859, '35': 1857, '34': 1855, '60': 1907, '61': 1909, '62': 1911, '63': 1913, '64': 1915, '65': 1917, '66': 1919, '67': 1921, '68': 1923, '69': 1925, '2': 1791, '6': 1799, '99': 1985, '98': 1983, '91': 1969, '90': 1967, '93': 1973, '92': 1971, '95': 1977, '94': 1975, '97': 1981, '96': 1979, '11': 1809, '10': 1807, '13': 1813, '12': 1811, '15': 1817, '14': 1815, '17': 1821, '16': 1819, '19': 1825, '18': 1823, '48': 1883, '49': 1885, '46': 1879, '47': 1881, '44': 1875, '45': 1877, '42': 1871, '43': 1873, '40': 1867, '41': 1869, '1': 1789, '5': 1797, '9': 1805, '77': 1941, '76': 1939, '75': 1937, '74': 1935, '73': 1933, '72': 1931, '71': 1929, '70': 1927, '79': 1945, '78': 1943};

            var numparties = {"1": 4, "2": 4, "3": 2, "4": 2, "5": 2, "6": 2, "7": 2, "8": 2, "9": 2, "10": 3, "11": 3, "12": 3, "13": 3, "14": 3, "15": 4, "16": 5, "17": 5, "18": 4, "19": 4, "20": 4, "21": 3, "22": 5, "23": 5, "24": 3, "25": 2, "26": 2, "27": 2, "28": 2, "29": 2, "30": 2, "31": 3, "32": 3, "33": 4, "34": 4, "35": 2, "36": 2, "37": 3, "38": 2, "39": 2, "40": 2, "41": 2, "42": 2, "43": 2, "44": 2, "45": 2, "46": 2, "47": 2, "48": 2, "49": 2, "50": 2, "51": 2, "52": 2, "53": 2, "54": 2, "55": 3, "56": 2, "57": 2, "58": 2, "59": 2, "60": 2, "61": 2, "62": 2, "63": 2, "64": 2, "65": 2, "66": 2, "67": 2, "68": 2, "69": 2, "70": 2, "71": 2, "72": 2, "73": 2, "74": 2, "75": 2, "76": 2, "77": 2, "78": 2, "79": 2, "80": 2, "81": 2, "82": 2, "83": 2, "84": 2, "85": 2, "86": 2, "87": 2, "88": 2, "89": 2, "90": 2, "91": 2, "92": 2, "93": 2, "94": 2, "95": 2, "96": 2, "97": 2, "98": 2, "99": 2, "100": 2, "101": 2, "102": 2, "103": 2, "104": 2, "105": 2, "106": 2, "107": 2, "108": 2, "109": 2, "110": 2, "111": 2, "112": 2, "113": 2}

            var w = $(window).width()-50;
            var h = $(window).height()-50;

            // d3.select("svg").remove();

            var svg = d3.select("#main")
                        .append("svg")
                        .attr("width", w)
                        .attr("height", h);

//             var format = d3.time.format("%m/%d/%y");

// var margin = {top: 20, right: 30, bottom: 30, left: 40},
//     width = 960 - margin.left - margin.right,
//     height = 500 - margin.top - margin.bottom;

// var x = d3.time.scale()
//     .range([0, width]);

// var y = d3.scale.linear()
//     .range([height, 0]);

// var z = d3.scale.category20c();

// var xAxis = d3.svg.axis()
//     .scale(x)
//     .orient("bottom")
//     .ticks(d3.time.days);

// var yAxis = d3.svg.axis()
//     .scale(y)
//     .orient("left");

// var stack = d3.layout.stack()
//     .offset("wiggle")
//     .values(function(d) { return d.values; })
//     .x(function(d) { return d.date; })
//     .y(function(d) { return d.value; });

// var nest = d3.nest()
//     .key(function(d) { return d.key; });

// var area = d3.svg.area()
//     .interpolate("cardinal")
//     .x(function(d) { return x(d.date); })
//     .y0(function(d) { return y(d.y0); })
//     .y1(function(d) { return y(d.y0 + d.y); });

// var svg = d3.select("body").append("svg")
//     .attr("width", width + margin.left + margin.right)
//     .attr("height", height + margin.top + margin.bottom)
//   .append("g")
//     .attr("transform", "translate(" + margin.left + "," + margin.top + ")");

// d3.csv("https://raw.githubusercontent.com/dinopants174/DataScienceFinalProject/master/data.csv", function(error, data) {
//   if (error) throw error;

//   data.forEach(function(d) {
//     d.date = format.parse(d.date);
//     d.value = +d.value;
//   });

//   var layers = stack(nest.entries(data));

//   x.domain(d3.extent(data, function(d) { return d.date; }));
//   y.domain([0, d3.max(data, function(d) { return d.y0 + d.y; })]);

//   svg.selectAll(".layer")
//       .data(layers)
//     .enter().append("path")
//       .attr("class", "layer")
//       .attr("d", function(d) { return area(d.values); })
//       .style("fill", function(d, i) { return z(i); });

//   svg.append("g")
//       .attr("class", "x axis")
//       .attr("transform", "translate(0," + height + ")")
//       .call(xAxis);

//   svg.append("g")
//       .attr("class", "y axis")
//       .call(yAxis);
// });


            // d3.csv("https://raw.githubusercontent.com/dinopants174/DataScienceFinalProject/master/partisans.csv", function(p) {

            //         svg.selectAll("rect")
            //             .data(p)
            //             .enter()
            //             .append('rect')
            //             .attr('x', 100)
            //             .attr('y', function(d,i) {
            //                 return 100 + 15*i;
            //             })
            //             .attr('width', function(d) {
            //                 return d['majority']*w;
            //             })
            //             .attr('height', 10)
            //             .attr('fill', 'blue');

            //         svg.selectAll("text")
            //             .data(p)
            //             .enter()
            //             .append("text")
            //             .text(function(d,i) {
            //                 console.log(sessionyears[(i+1).toString()])
            //                 return sessionyears[(i+1).toString()];
            //             })
            //             .attr("x", 100-25)
            //             .attr("y", function(d,i) {
            //                 return 109 + 15*i;
            //             })
            //             .attr("font-family", "sans-serif")
            //             .attr("font-size", "10px")
            //             .attr("text-anchor", "right");

            //         svg.selectAll("labels")
            //             .data(p)
            //             .enter()
            //             .append("text")
            //             .text(function(d) {
            //                 return d['majority'];
            //             })
            //             .attr("x", function(d) {
            //                 return d['majority']*w + 102;
            //             })
            //             .attr("y", function(d,i) {
            //                 return 109 + 15*i;
            //             })
            //             .attr("text-anchor", "right")
            //             .attr("font-family", "sans-serif")
            //             .attr("font-size", "10px");

                            
            //     });
            // d3.csv("https://raw.githubusercontent.com/dinopants174/DataScienceFinalProject/master/partisans.csv", function(p) {

            // });

            // var layers = [
            //   {
            //     "name": "apples",
            //     "values": [
            //       { "x": 0, "y":  91},
            //       { "x": 1, "y": 290}
            //     ]
            //   },
            //   {  
            //     "name": "oranges",
            //     "values": [
            //       { "x": 0, "y":  9},
            //       { "x": 1, "y": 49}
            //     ]
            //   }
            // ];

            // var x = d3.scale.linear()
            //     .domain([0, d3.max(layers, function(d) { 
            //         console.log(d.values);
            //         return d.values[0].x; })])
            //     .range([0, w]);

            // var y = d3.scale.linear()
            //     .domain([0, d3.max(layers, function(d) { return d.values[0].y; })])
            //     .range([h, 0]);

            // var area = d3.svg.area()
            //     .x(function(d) { 
            //         //console.log(d);
            //         return x(d.x); })
            //     .y0(h)
            //     .y1(function(d) { return y(d.y); });
            // //     .interpolate("bundle")
            // //     .x(function (d) {
            // //     console.log(x(d.x))
            // //     return d.x;
            // // })
            // //     .y0(230)
            // //     .y1(function (d) {
            // //     console.log(y(d.y))
            // //     return d.y;
            // // });

            // var stack = d3.layout.stack()
            // .offset("wiggle")
            // .values(function(d) { return d.values; });

            // svg.selectAll("path")
            //     .data(stack(layers))
            //   .enter().append("path")
            //     .attr("d", function(d) { 
            //         console.log(area(d.values));
            //             return area(d.values); })
            //   .append("title")
            //     .text(function(d) { return d.name; });


            // works

            d3.json('https://raw.githubusercontent.com/dinopants174/DataScienceFinalProject/master/partdata.json', function(data) {
                console.log(data);
              nv.addGraph(function() {
                var chart = nv.models.stackedAreaChart()
                              .margin({right: 100})
                              .x(function(d) { return d[0] })   //We can modify the data accessor functions...
                              .y(function(d) { 
                                return d[1] / numparties[d[0]]; })   //...in case your data is formatted differently.
                              .useInteractiveGuideline(true)    //Tooltips which show all data points. Very nice!
                              .rightAlignYAxis(true)      //Let's move the y-axis to the right side.
                              .showControls(true)       //Allow user to choose 'Stacked', 'Stream', 'Expanded' mode.
                              .clipEdge(true);

                //Format x-axis labels with custom function.
                chart.xAxis
                    .tickFormat(function(d) { 
                      return d; 
                });

                chart.yAxis
                    .tickFormat(d3.format(',.2f'));

                d3.select('#main svg')
                  .datum(data)
                  .call(chart);

                nv.utils.windowResize(chart.update);

                return chart;
              });
            });

// var n = 20, // number of layers
//     m = 200, // number of samples per layer
//     stack = d3.layout.stack().offset("wiggle"),
//     layers0 = stack(d3.range(n).map(function() { return bumpLayer(m); })),
//     layers1 = stack(d3.range(n).map(function() { return bumpLayer(m); }));

// var width = 960,
//     height = 500;

// var x = d3.scale.linear()
//     .domain([0, m - 1])
//     .range([0, width]);

// var y = d3.scale.linear()
//     .domain([0, d3.max(layers0.concat(layers1), function(layer) { return d3.max(layer, function(d) { return d.y0 + d.y; }); })])
//     .range([height, 0]);

// var color = d3.scale.linear()
//     .range(["#aad", "#556"]);

// var area = d3.svg.area()
//     .x(function(d) { return x(d.x); })
//     .y0(function(d) { return y(d.y0); })
//     .y1(function(d) { return y(d.y0 + d.y); });

// var svg = d3.select("body").append("svg")
//     .attr("width", width)
//     .attr("height", height);

// svg.selectAll("path")
//     .data(layers0)
//   .enter().append("path")
//     .attr("d", area)
//     .style("fill", function() { return color(Math.random()); });

// function transition() {
//   d3.selectAll("path")
//       .data(function() {
//         var d = layers1;
//         layers1 = layers0;
//         return layers0 = d;
//       })
//     .transition()
//       .duration(2500)
//       .attr("d", area);
// }

// // Inspired by Lee Byron's test data generator.
// function bumpLayer(n) {

//   function bump(a) {
//     var x = 1 / (.1 + Math.random()),
//         y = 2 * Math.random() - .5,
//         z = 10 / (.1 + Math.random());
//     for (var i = 0; i < n; i++) {
//       var w = (i / n - y) * z;
//       a[i] += x * Math.exp(-w * w);
//     }
//   }

//   var a = [], i;
//   for (i = 0; i < n; ++i) a[i] = 0;
//   for (i = 0; i < 5; ++i) bump(a);
//   return a.map(function(d, i) { return {x: i, y: Math.max(0, d)}; });
// }


        </script>
    </body>
</html>     