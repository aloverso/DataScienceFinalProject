<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <title>Congress</title>
        <script src="https://d3js.org/d3.v3.min.js" charset="utf-8"></script>
        <link href="d3/nv.d3.css" rel="stylesheet">
        <script src="d3/nv.d3.js"></script>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.0/jquery.min.js"></script>
        <script src="d3/dragit.js" charset="utf-8"></script>
        <style>
            body {
                margin: 25px;
                font-family: Arial;
            }


            p {
                
                letter-spacing: .25px;
                line-height: 1.5;
            }

        </style>
    </head>
    <body>

        <div id="main"></div>

        <p style="clear:both"></p>
        <div id="slider"></div>

        
        <script type="text/javascript">

            var sessionyears = {'24': 1835, '25': 1837, '26': 1839, '27': 1841, '20': 1827, '21': 1829, '22': 1831, '23': 1833, '28': 1843, '29': 1845, '4': 1795, '8': 1803, '59': 1905, '58': 1903, '55': 1897, '54': 1895, '57': 1901, '56': 1899, '51': 1889, '50': 1887, '53': 1893, '52': 1891, '88': 1963, '89': 1965, '111': 2009, '110': 2007, '113': 2013, '112': 2011, '82': 1951, '83': 1953, '80': 1947, '81': 1949, '86': 1959, '87': 1961, '84': 1955, '85': 1957, '3': 1793, '7': 1801, '108': 2003, '109': 2005, '102': 1991, '103': 1993, '100': 1987, '101': 1989, '106': 1999, '107': 2001, '104': 1995, '105': 1997, '39': 1865, '38': 1863, '33': 1853, '32': 1851, '31': 1849, '30': 1847, '37': 1861, '36': 1859, '35': 1857, '34': 1855, '60': 1907, '61': 1909, '62': 1911, '63': 1913, '64': 1915, '65': 1917, '66': 1919, '67': 1921, '68': 1923, '69': 1925, '2': 1791, '6': 1799, '99': 1985, '98': 1983, '91': 1969, '90': 1967, '93': 1973, '92': 1971, '95': 1977, '94': 1975, '97': 1981, '96': 1979, '11': 1809, '10': 1807, '13': 1813, '12': 1811, '15': 1817, '14': 1815, '17': 1821, '16': 1819, '19': 1825, '18': 1823, '48': 1883, '49': 1885, '46': 1879, '47': 1881, '44': 1875, '45': 1877, '42': 1871, '43': 1873, '40': 1867, '41': 1869, '1': 1789, '5': 1797, '9': 1805, '77': 1941, '76': 1939, '75': 1937, '74': 1935, '73': 1933, '72': 1931, '71': 1929, '70': 1927, '79': 1945, '78': 1943};

            var numparties = {"1": 4, "2": 4, "3": 2, "4": 2, "5": 2, "6": 2, "7": 2, "8": 2, "9": 2, "10": 3, "11": 3, "12": 3, "13": 3, "14": 3, "15": 4, "16": 5, "17": 5, "18": 4, "19": 4, "20": 4, "21": 3, "22": 5, "23": 5, "24": 3, "25": 2, "26": 2, "27": 2, "28": 2, "29": 2, "30": 2, "31": 3, "32": 3, "33": 4, "34": 4, "35": 2, "36": 2, "37": 3, "38": 2, "39": 2, "40": 2, "41": 2, "42": 2, "43": 2, "44": 2, "45": 2, "46": 2, "47": 2, "48": 2, "49": 2, "50": 2, "51": 2, "52": 2, "53": 2, "54": 2, "55": 3, "56": 2, "57": 2, "58": 2, "59": 2, "60": 2, "61": 2, "62": 2, "63": 2, "64": 2, "65": 2, "66": 2, "67": 2, "68": 2, "69": 2, "70": 2, "71": 2, "72": 2, "73": 2, "74": 2, "75": 2, "76": 2, "77": 2, "78": 2, "79": 2, "80": 2, "81": 2, "82": 2, "83": 2, "84": 2, "85": 2, "86": 2, "87": 2, "88": 2, "89": 2, "90": 2, "91": 2, "92": 2, "93": 2, "94": 2, "95": 2, "96": 2, "97": 2, "98": 2, "99": 2, "100": 2, "101": 2, "102": 2, "103": 2, "104": 2, "105": 2, "106": 2, "107": 2, "108": 2, "109": 2, "110": 2, "111": 2, "112": 2, "113": 2}

            var w = $(window).width()-50;
            var h = $(window).height()-50;

            // d3.select("svg").remove();

            var svg = d3.select("#main")
                        .append("svg")
                        .attr("width", w)
                        .attr("height", h);

            var dataset = [ {
                "party": "Democrat",
                "vals" : {
                    "num" : 260,
                    "unification": 0.7,
                    "majority": 0.13
                }
            },
            {
                "party": "Republican",
                "vals" : {
                    "num" : 286,
                    "unification": 0.71,
                    "majority": 0.13
                }
            } ];

            var dist = dataset[0].vals.num/2 + dataset[1].vals.num/2;

            var grad = svg.append("defs")
                .selectAll("lg")
                .data(dataset).enter().append("linearGradient")
                .attr("class", "lg")
                .attr("id", function(d,i) {
                    return "grad"+i;
                })
                .attr("x1", "0%")
                .attr("x2", "0%")
                .attr("y1", "100%")
                .attr("y2", "0%")
                .append("stop")
                .attr("offset", function(d) {
                    return (100*d.vals.unification)+"%";
                })
                .style("stop-color", function(d) {
                    if (d.party === "Democrat")
                    {
                        return "rgba(0,0,100,.6)";
                    }
                    else {
                        return "rgba(100,0,0,.6)";
                    }
                });


            svg.select("defs").selectAll(".lg")
                .append("stop")
                .attr("offset", "0%")
                .style("stop-color", "rgba(0, 0, 0, 0.0)");


            var circles = svg.selectAll("circle")
                .data(dataset)
                .enter()
                .append("circle");
            circles.attr("cx", function(d, i) {
                if (i==0) {
                    return 200;
                }
                else {
                    return 200 + (1-d.vals.majority)*dist;
                }
            })
           .attr("cy", h/2)
           .attr("r", function(d) {
                return d.vals.num/2;
           })
           .attr("fill", function(d) {
                if (d.party === "Democrat")
                {
                    return "rgba(0,0,100,.6)";
                }
                else {
                    return "rgba(100,0,0,.6)";
                }
           });

           var circles = svg.selectAll(".circle2")
                .data(dataset)
                .enter()
                .append("circle");
            circles.attr("cx", function(d, i) {
                if (i==0) {
                    return 200;
                }
                else {
                    return 200 + (1-d.vals.majority)*dist;
                }
            })
           .attr("cy", h/2)
           .attr("r", function(d) {
                return d.vals.num/2;
           })
           .attr("fill", function(d,i) {
                return "url(#grad"+i+")";
            });

           // var margin = {top: 20, right: 20, bottom: 20, left: 20},
           //      width = 900 - margin.right - margin.left,
           //      height = 500 - margin.top - margin.bottom;
            
           //  var nb_points = 1;

           //  dragit.time = {min: 0, max: 20, step: 1, current: 0};
            
           //  dragit.time.current = 0;
            
           //  var timecube = d3.range(nb_points).map(function(d, i) {
           //          return d3.range(dragit.time.max).map(function(e, j) { 
           //              return {x: j, y: Math.random(), t: j};
           //      });
           //  })

           //  console.log(timecube);

           //  var xScale = d3.scale.linear().domain([0, dragit.time.max]).range([margin.left, width]);
           
           //  var yScale = d3.scale.linear()
           //      .domain([0, d3.max(timecube, function(d) { 
           //          return d3.max(d, function(e) { 
           //              return e.y; 
           //              });
           //          })
           //      ])
           //      .range([margin.top, height]);

           //  var svg = d3.select("#main")
           //      .append("svg")
           //      .attr({width: width, height: height})

           //  var gPoints = svg.selectAll(".points")
           //      .data(timecube)
           //      .enter()
           //      .append("g")
           //      .call(dragit.object.activate)
           //      .attr("transform", function(d) {
           //          return "translate("+xScale(d[dragit.time.current].x)+", "+yScale(d[dragit.time.current].y)+")";
           //      })
           //      .attr("class", "points");

           //  gPoints.append("circle")
           //      .attr({r:10, fill:"red"})

           //  function update(v, t) {
           //      dragit.time.current = v || dragit.time.current;
                
           //      gPoints.transition().duration(500)
           //          .style('opacity', function(d) {
           //              console.log(100 - d[dragit.time.current].x*5);
           //              return (100 - d[dragit.time.current].x*5)/100.0;
           //          });
           //          gPoints.select('circle').transition().duration(500)
           //          .attr('r',function(d) {
           //              console.log(d[dragit.time.current].x*2);
           //              return d[dragit.time.current].x*2;
           //          });
           //  }

           //  function init() {
           //    dragit.init("svg");
           //    dragit.data = timecube.map(function(d, i) { 
           //      return d.map(function(e, i) { 
           //          return [xScale(e.x), yScale(e.y)]; 
           //      }) 
           //    });
              
           //    dragit.evt.register("update", update);
           //    dragit.playback.loop = true;
           //    dragit.playback.speed =  500;
           //    dragit.utils.slider("#slider", true);
           //  }
            
           //  init();

        </script>
    </body>
</html>     